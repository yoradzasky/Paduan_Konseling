<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Formulir Pendaftaran - Padu Konseling</title>
    <link href="https://fonts.googleapis.com/css2?family=Merriweather:wght@700&family=Inter:wght@400;500;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
    
    <style>
        /* --- PREMIUM FORM STYLING --- */
        
        .booking-section {
            background: linear-gradient(135deg, #F9F8F2 0%, #E8F0E8 100%);
            padding: 4rem 5%;
            min-height: 100vh;
        }

        .booking-container {
            background-color: #ffffff;
            padding: 3rem;
            border-radius: 24px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.06);
            width: 100%;
            max-width: 700px;
            margin: 0 auto;
            border: 1px solid rgba(255,255,255,0.5);
            position: relative;
            overflow: hidden;
        }

        .booking-container::before {
            content: "";
            position: absolute;
            top: 0; left: 0; right: 0;
            height: 6px;
            background: linear-gradient(90deg, #1B263B, #8FBC8F);
        }

        .booking-header h2 {
            font-family: 'Merriweather', serif;
            color: #1B263B;
            font-size: 2rem;
            margin-bottom: 0.5rem;
        }

        .booking-header p {
            color: #666;
            margin-bottom: 2.5rem;
        }

        .form-group label {
            color: #1B263B;
            font-weight: 600;
            font-size: 0.95rem;
            margin-bottom: 0.5rem;
            display: block;
        }

        .form-control {
            width: 100%;
            padding: 12px 16px;
            border: 1.5px solid #E5E7EB;
            border-radius: 12px;
            font-family: 'Inter', sans-serif;
            font-size: 1rem;
            transition: all 0.3s ease;
            background-color: #FDFDFD;
        }

        .form-control:focus {
            outline: none;
            border-color: #0E4D45;
            box-shadow: 0 0 0 4px rgba(14, 77, 69, 0.1);
            background-color: #fff;
        }

        textarea.form-control {
            min-height: 120px;
            resize: vertical;
        }

        /* Radio & Checkbox Styling */
        .radio-group {
            display: flex;
            flex-direction: column;
            gap: 10px;
            margin-top: 5px;
        }

        .radio-item {
            display: flex;
            align-items: center;
            background: #fff;
            border: 1px solid #E5E7EB;
            padding: 12px 16px;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.2s;
        }

        .radio-item:hover {
            background-color: #F0F7F4;
            border-color: #8FBC8F;
        }

        .radio-item input {
            margin-right: 12px;
            accent-color: #0E4D45;
            transform: scale(1.2);
        }

        #jk_lain, #profesi_lain, #profesional_lain, #sumber_info_lain {
            margin-top: 8px;
            border-radius: 8px;
            font-size: 0.9rem;
        }

        .sibling-row {
            display: flex;
            gap: 1rem;
            align-items: center;
            background: #F9F9F9;
            padding: 15px;
            border-radius: 12px;
        }
        
        .sibling-input {
            width: 80px;
            text-align: center;
        }

        .payment-alert {
            background-color: #FFF8E1;
            border: 1px solid #FFE082;
            color: #795548;
            padding: 1.2rem;
            border-radius: 12px;
            display: flex;
            align-items: flex-start;
            gap: 15px;
            line-height: 1.5;
        }
        
        .payment-icon {
            font-size: 1.5rem;
            margin-top: -2px;
        }

        .btn-submit {
            width: 100%;
            background-color: #0E4D45;
            color: white;
            padding: 16px;
            border: none;
            border-radius: 50px;
            font-size: 1.1rem;
            font-weight: 600;
            letter-spacing: 0.5px;
            cursor: pointer;
            margin-top: 2rem;
            box-shadow: 0 4px 15px rgba(14, 77, 69, 0.3);
            transition: transform 0.2s, box-shadow 0.2s;
        }

        .btn-submit:hover {
            background-color: #093832;
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(14, 77, 69, 0.4);
        }

        @media (max-width: 768px) {
            .booking-container { padding: 1.5rem; }
            .booking-header h2 { font-size: 1.8rem; }
            .sibling-row { flex-wrap: wrap; }
        }
    </style>
</head>
<body>

    <header>
        <div class="logo">PADU KONSELING</div>
        
        <div class="hamburger" onclick="toggleMenu()">
            <span></span>
            <span></span>
            <span></span>
        </div>

        <nav>
            <ul class="nav-menu">
                <li><a href="index.html#beranda">Beranda</a></li>
                <li><a href="index.html#tentang">Tentang</a></li>
                <li><a href="index.html#alur">Alur</a></li>
                <li><a href="contact.html" class="btn-nav">Hubungi Admin</a></li>
            </ul>
        </nav>
    </header>

    <section class="booking-section">
        <div class="booking-container">
            <div class="booking-header">
                <h2>Formulir Pendaftaran</h2>
                <p>Mohon isi data diri Anda dengan lengkap untuk asesmen awal.</p>
            </div>

            <form id="appointmentForm" name="pendaftaran" method="POST" data-netlify="true" action="/success.html" onsubmit="handleSubmit(event)">
                
                <input type="hidden" name="form-name" value="pendaftaran" />

                <div class="form-group">
                    <label for="email">Email</label>
                    <input type="email" id="email" name="email" class="form-control" placeholder="contoh@email.com" required>
                </div>

                <div class="form-group">
                    <label>Metode Konsultasi</label>
                    <div class="radio-group">
                        <label class="radio-item">
                            <input type="radio" name="metode" value="Offline (Tatap Muka)" required> 
                            <span>Offline (Datang ke Lokasi)</span>
                        </label>
                        <label class="radio-item">
                            <input type="radio" name="metode" value="Online (Zoom/Google Meet)"> 
                            <span>Online (Zoom/Google Meet)</span>
                        </label>
                    </div>
                </div>

                <div class="form-group">
                    <label>Apakah sebelumnya sudah pernah mengikuti Konseling?</label>
                    <div class="radio-group">
                        <label class="radio-item"><input type="radio" name="riwayat" value="Sudah"> Sudah</label>
                        <label class="radio-item"><input type="radio" name="riwayat" value="Belum"> Belum</label>
                    </div>
                </div>

                <div class="form-group">
                    <label for="nama">Nama Lengkap (Beserta gelar bila ada)</label>
                    <input type="text" id="nama" name="nama" class="form-control" required>
                </div>

                <div class="form-group">
                    <label for="wa">Nomor WhatsApp</label>
                    <input type="number" id="wa" name="whatsapp" class="form-control" placeholder="08..." required>
                </div>

                <div class="form-group">
                    <label>Jenis Kelamin</label>
                    <div class="radio-group">
                        <label class="radio-item"><input type="radio" name="jk" value="Laki-laki"> Laki-laki</label>
                        <label class="radio-item"><input type="radio" name="jk" value="Perempuan"> Perempuan</label>
                    </div>
                </div>

                <div class="form-group">
                    <label for="tempat_lahir">Tempat Lahir</label>
                    <input type="text" id="tempat_lahir" name="tempat_lahir" class="form-control" required>
                </div>
                <div class="form-group">
                    <label for="tgl_lahir">Tanggal Lahir</label>
                    <input type="date" id="tgl_lahir" name="tgl_lahir" class="form-control" required>
                </div>

                <div class="form-group">
                    <label>Urutan Kelahiran</label>
                    <div class="sibling-row">
                        <span>Anak ke</span>
                        <input type="number" id="anak_ke" name="anak_ke" class="form-control sibling-input">
                        <span>dari</span>
                        <input type="number" id="dari_bersaudara" name="dari_bersaudara" class="form-control sibling-input">
                        <span>bersaudara</span>
                    </div>
                </div>

                <div class="form-group">
                    <label for="agama">Agama</label>
                    <select id="agama" name="agama" class="form-control">
                        <option value="" disabled selected>-- Pilih Agama --</option>
                        <option value="Islam">Islam</option>
                        <option value="Kristen Protestan">Kristen Protestan</option>
                        <option value="Kristen Katolik">Kristen Katolik</option>
                        <option value="Hindu">Hindu</option>
                        <option value="Budha">Budha</option>
                        <option value="Kong Hu Cu">Kong Hu Cu</option>
                        <option value="Lainnya">Yang lain</option>
                    </select>
                </div>

                <div class="form-group">
                    <label for="status">Status/Hubungan</label>
                    <select id="status" name="status" class="form-control">
                        <option value="" disabled selected>-- Pilih Status --</option>
                        <option value="Lajang">Lajang</option>
                        <option value="Menikah">Menikah</option>
                        <option value="Menikah & Memiliki Anak">Menikah & Memiliki Anak</option>
                        <option value="Berpisah/Bercerai">Berpisah/Bercerai</option>
                        <option value="Lainnya">Yang lain</option>
                    </select>
                </div>

                <div class="form-group">
                    <label for="domisili">Tempat tinggal saat ini (Kota/Provinsi)</label>
                    <input type="text" id="domisili" name="domisili" class="form-control" required>
                </div>

                <div class="form-group">
                    <label>Profesi/Pekerjaan</label>
                    <div class="radio-group">
                        <label class="radio-item"><input type="radio" name="profesi" value="Tidak Bekerja"> Tidak Bekerja</label>
                        <label class="radio-item"><input type="radio" name="profesi" value="Sedang Bekerja/Part Time"> Sedang Bekerja/Part Time</label>
                        <input type="text" id="profesi_lain" name="profesi_lain" class="form-control" placeholder="Profesi lainnya..." style="background: #f9f9f9;">
                    </div>
                </div>

                <div class="form-group">
                    <label for="masalah">Gambaran Permasalahan (Singkat)</label>
                    <textarea id="masalah" name="masalah" class="form-control" placeholder="Ceritakan keluhan Anda secara singkat di sini..." required></textarea>
                </div>

                <div class="form-group">
                    <label>Pernah menemui tenaga profesional? (Boleh pilih lebih dari satu)</label>
                    <div class="radio-group">
                        <label class="radio-item"><input type="checkbox" name="profesional" value="Psikolog"> Psikolog</label>
                        <label class="radio-item"><input type="checkbox" name="profesional" value="Psikiater"> Psikiater</label>
                        <label class="radio-item"><input type="checkbox" name="profesional" value="Dokter Umum"> Dokter Umum</label>
                        <label class="radio-item"><input type="checkbox" name="profesional" value="Dokter Spesialis"> Dokter Spesialis</label>
                        <label class="radio-item"><input type="checkbox" name="profesional" value="Belum Pernah"> Belum Pernah</label>
                        <input type="text" id="profesional_lain" name="profesional_lain" class="form-control" placeholder="Lainnya..." style="background: #f9f9f9;">
                    </div>
                </div>

                <div class="form-group">
                    <label for="motivasi">Ketertarikan pada Genogram & Access Bars?</label>
                    <textarea id="motivasi" name="motivasi" class="form-control" required></textarea>
                </div>

                <div class="form-group">
                    <label>Mengetahui layanan ini dari? (Boleh pilih lebih dari satu)</label>
                    <div class="radio-group">
                        <label class="radio-item"><input type="checkbox" name="sumber_info" value="Instagram"> Instagram</label>
                        <label class="radio-item"><input type="checkbox" name="sumber_info" value="Facebook"> Facebook</label>
                        <label class="radio-item"><input type="checkbox" name="sumber_info" value="Google Search"> Google Search</label>
                        <label class="radio-item"><input type="checkbox" name="sumber_info" value="Keluarga"> Keluarga</label>
                        <label class="radio-item"><input type="checkbox" name="sumber_info" value="Teman"> Teman</label>
                        <input type="text" id="sumber_info_lain" name="sumber_info_lain" class="form-control" placeholder="Lainnya..." style="background: #f9f9f9;">
                    </div>
                </div>

                <div class="form-group">
                    <label>Bukti Komitmen Pembayaran</label>
                    <div class="payment-alert">
                        <div class="payment-icon">⚠️</div>
                        <div>
                            <strong>PENTING:</strong> Data Anda akan tersimpan otomatis di database kami.
                            <br>Setelah klik tombol di bawah, Anda akan diarahkan ke WhatsApp untuk mengirimkan <strong>foto bukti transfer</strong> secara manual.
                        </div>
                    </div>
                </div>

                <button type="submit" class="btn-submit">KIRIM FORMULIR</button>
            </form>
        </div>
    </section>

    <footer>
        <div class="footer-left">
            <h3>PADU KONSELING</h3>
            <p>Seimbang Pikiran, Pulihkan Tubuh.</p>
        </div>
        <div class="footer-contact">
            <p><strong>WhatsApp:</strong> +62 895-6119-26549</p>
            <p><strong>Email:</strong> admin@padukonseling.com</p>
        </div>
        <div class="copyright">
            &copy; 2026 Padu Konseling. All Rights Reserved.
        </div>
    </footer>

    <script>
        // PERBAIKAN: Menambahkan fungsi toggleMenu untuk Hamburger
        function toggleMenu() {
            const menu = document.querySelector('.nav-menu');
            const hamburger = document.querySelector('.hamburger');
            menu.classList.toggle('active');
            hamburger.classList.toggle('active');
        }

        function getRadioValue(name) {
            const el = document.querySelector(`input[name="${name}"]:checked`);
            return el ? el.value : '-';
        }

        function getValue(id) {
            const el = document.getElementById(id);
            return el ? el.value : '-';
        }

        function getCheckboxValues(name) {
            const checked = document.querySelectorAll(`input[name="${name}"]:checked`);
            let values = Array.from(checked).map(el => el.value);
            return values.length > 0 ? values.join(", ") : '-';
        }

        function handleSubmit(e) {
            e.preventDefault(); 

            const myForm = e.target;
            const formData = new FormData(myForm);

            // Kirim Data ke Netlify (Database)
            fetch("/", {
                method: "POST",
                headers: { "Content-Type": "application/x-www-form-urlencoded" },
                body: new URLSearchParams(formData).toString(),
            })
            .then(() => {
                console.log("Data berhasil disimpan ke Netlify");
                
                // --- AMBIL SEMUA DATA UNTUK WHATSAPP ---
                const email = getValue('email');
                const nama = getValue('nama');
                const wa = getValue('wa');
                const masalah = getValue('masalah');
                const metode = getRadioValue('metode'); 

                // Logika Multiple Choice (Checkbox + Lainnya)
                let profesional = getCheckboxValues('profesional');
                const profLain = getValue('profesional_lain');
                if (profLain !== '-' && profLain !== '') {
                    profesional = (profesional !== '-') ? `${profesional}, ${profLain}` : profLain;
                }

                let sumber = getCheckboxValues('sumber_info');
                const sumberLain = getValue('sumber_info_lain');
                if (sumberLain !== '-' && sumberLain !== '') {
                    sumber = (sumber !== '-') ? `${sumber, sumberLain}` : sumberLain;
                }

                const nomorAdmin = "62895611926549";
                
                // Format Pesan WhatsApp (Dibuat Rapi)
                const pesanTeks = 
`*FORMULIR PENDAFTARAN PADU KONSELING*
----------------------------------
*Nama:* ${nama}
*Email:* ${email}
*No WA:* ${wa}
*Metode:* ${metode}
*Riwayat Pro:* ${profesional}
*Info Dari:* ${sumber}
*Masalah:*
${masalah}
----------------------------------
_Data tersimpan di Database. Saya akan mengirimkan bukti bayar._`;

                const pesanEncoded = encodeURIComponent(pesanTeks);
                const urlWa = `https://wa.me/${nomorAdmin}?text=${pesanEncoded}`;
                
                // Eksekusi Pindah Halaman
                window.open(urlWa, '_blank');
                window.location.href = "success.html";
            })
            .catch((error) => {
                alert("Terjadi kesalahan koneksi. Silakan coba lagi.");
                console.error("Gagal simpan database:", error);
            });
        }
    </script>

</body>
</html>